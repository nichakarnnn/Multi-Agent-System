# โครงการ: ศาลจำลองประวัติศาสตร์ (The Historical Court)

## ภาพรวมโครงการ

โครงการนี้คือการพัฒนาระบบ Multi-Agent ด้วย Google ADK เพื่อวิเคราะห์บุคคลหรือเหตุการณ์ในประวัติศาสตร์ในรูปแบบของ "ศาลจำลอง" โดยมีเป้าหมายเพื่อสร้างรายงานที่เป็นกลางที่สุดจากการสืบค้นข้อมูลจาก Wikipedia ในแง่มุมที่ขัดแย้งกัน

## โครงสร้างของ Agent (Architecture)

ระบบถูกออกแบบให้ทำงานตามลำดับขั้น (Sequential) โดยมีขั้นตอนย่อยที่ทำงานแบบขนาน (Parallel) และวนซ้ำ (Loop) ดังนี้:

### 1. The Inquiry (การรับเรื่อง)

*   **Agent:** `Inquiry_Clerk` (เสมียนศาล)
*   **ประเภท:** Root Agent
*   **หน้าที่:**
    1.  เริ่มต้นการสนทนาและรับหัวข้อ (บุคคลหรือเหตุการณ์) ที่ผู้ใช้ต้องการวิเคราะห์
    2.  บันทึกหัวข้อลงใน Session State ด้วย Key `PROMPT`
    3.  ส่งต่อการทำงานไปยัง `Historical_Court` Agent เพื่อเริ่มกระบวนการ

### 2. The Trial & Review (การพิจารณาคดี - Loop)

*   **Agent:** `Trial_and_Review`
*   **ประเภท:** `LoopAgent`
*   **หน้าที่:** เป็น Agent หลักที่ควบคุมกระบวนการสืบสวนและพิจารณาคดี จะทำงานวนซ้ำ (สูงสุด 3 รอบ) จนกว่า `The_Judge` จะสั่งให้ยุติการทำงาน ประกอบด้วย 2 ส่วนย่อยที่ทำงานตามลำดับ:

    #### 2.1 The Investigation (การสืบสวน - Parallel)
    *   **Agent:** `Investigation_Team`
    *   **ประเภท:** `ParallelAgent`
    *   **หน้าที่:** แยกการทำงานออกเป็น 2 ส่วนเพื่อค้นหาข้อมูลพร้อมกัน
        *   **`The_Admirer` (ฝ่ายสนับสนุน):** ค้นหาและรวบรวมข้อมูลเกี่ยวกับ "ความสำเร็จและด้านบวก" ของหัวข้อ บันทึกผลลัพธ์ลงใน State Key `pos_data`
        *   **`The_Critic` (ฝ่ายวิจารณ์):** ค้นหาและรวบรวมข้อมูลเกี่ยวกับ "ข้อผิดพลาด, ด้านลบ, และข้อโต้แย้ง" ของหัวข้อ บันทึกผลลัพธ์ลงใน State Key `neg_data`

    #### 2.2 The Review (การตรวจสอบ)
    *   **Agent:** `The_Judge` (ผู้พิพากษา)
    *   **ประเภท:** Sub-agent ภายใน Loop
    *   **หน้าที่:**
        1.  ตรวจสอบข้อมูลที่รวบรวมได้จาก `pos_data` และ `neg_data`
        2.  หากข้อมูลฝั่งใดฝั่งหนึ่ง "น้อยเกินไป" หรือ "ไม่สมดุล" จะสั่งให้ `Investigation_Team` กลับไปค้นหาข้อมูลใหม่พร้อมคำแนะนำเพิ่มเติม
        3.  หากข้อมูลมีความสมดุลและสมบูรณ์แล้ว จะเรียกใช้เครื่องมือ `exit_loop` เพื่อยุติกระบวนการสืบสวน

### 3. The Verdict (คำพิพากษา)

*   **Agent:** `Verdict_Writer` (ผู้เขียนคำพิพากษา)
*   **ประเภท:** Sub-agent
*   **หน้าที่:**
    1.  รับข้อมูลสรุปทั้งหมดจาก `pos_data` และ `neg_data`
    2.  สร้างรายงานเปรียบเทียบข้อเท็จจริงทั้งสองด้านอย่างเป็นกลางในรูปแบบภาษาไทย
    3.  บันทึกรายงานสรุปผลลงในไฟล์ `.txt` ในไดเรกทอรี `historical_verdicts/`

## ข้อกำหนดทางเทคนิค (Technical Details)

*   **Wiki Research:** Agent ฝ่ายสนับสนุน (`The_Admirer`) และฝ่ายวิจารณ์ (`The_Critic`) ได้รับการปรับปรุง Instruction ให้รู้จักเติมคำค้นหาที่เฉพาะเจาะจงสำหรับแง่มุมของตนเอง เช่น `... achievements`, `... success` สำหรับฝ่ายบวก และ `... controversy`, `... criticism` สำหรับฝ่ายลบ เพื่อให้ได้ข้อมูลที่ตรงประเด็น

*   **State Management:**
    *   มีการใช้ Session State เพื่อจัดเก็บและส่งต่อข้อมูลระหว่าง Agent
    *   ใช้ Key ที่ชัดเจนในการแยกแยะข้อมูล เช่น `PROMPT` สำหรับหัวข้อ, `pos_data` สำหรับข้อมูลด้านบวก, และ `neg_data` สำหรับข้อมูลด้านลบ
    *   ใช้การ Templating (`{key?}`) ใน Instruction ของ Agent เพื่อดึงข้อมูลจาก State มาเป็นบริบทในการทำงาน

*   **Loop Logic:**
    *   การจบการทำงานของ `LoopAgent` ไม่ได้ขึ้นอยู่กับการใช้ Prompt เพียงอย่างเดียว แต่ต้องใช้เครื่องมือ `exit_loop` ที่ถูกเรียกโดย `The_Judge` Agent เท่านั้น ซึ่งเป็นไปตามข้อกำหนดของโจทย์

*   **Output:**
    *   ผลลัพธ์สุดท้ายคือไฟล์รายงาน `.txt` ที่ถูกสร้างขึ้นเป็นภาษาไทย และจัดเก็บไว้ในไดเรกทอรีที่กำหนด

## วิธีการรัน (How to Run)

1.  เปิด Terminal
2.  ตรวจสอบให้แน่ใจว่าคุณอยู่ในไดเรกทอรี `adk_multiagent_systems`
3.  รันคำสั่งต่อไปนี้:
    ```bash
    adk run workflow_agents
    ```
4.  ระบบจะเริ่มทำงานโดย `Inquiry_Clerk` จะเข้ามาสอบถามหัวข้อที่คุณสนใจ
5.  เมื่อกระบวนการเสร็จสิ้น ไฟล์รายงานจะถูกสร้างขึ้นในไดเรกทอรี `adk_multiagent_systems/historical_verdicts/`

---

This project is created for the Multi-Agent System homework assignment.